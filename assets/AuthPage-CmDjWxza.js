import{c,r as s,j as e,m as v,B as x}from"./index-BU3o7e8Q.js";import{I as n}from"./Input-UTDGSNfF.js";import{A as k}from"./config-COe7nS04.js";import{U as N}from"./user-4a7fajuy.js";const w=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],S=c("github",w);const A=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],I=c("lock",A);const C=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_=c("mail",C),P=({onLogin:h})=>{const[t,d]=s.useState(!0),[p,u]=s.useState(!1),[r,b]=s.useState(""),[o,y]=s.useState(""),[m,f]=s.useState("");return e.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center p-4",children:e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden transition-colors",children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:t?"Welcome Back":"Create Account"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t?"Enter your details to access your assistant":"Join our academic AI community today"})]}),e.jsxs("form",{className:"space-y-5",onSubmit:async a=>{a.preventDefault(),u(!0);const g=t?"/api/auth/login":"/api/auth/register",j=t?{email:r,password:o}:{email:r,password:o,name:m};try{const l=await fetch(`${k}${g}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),i=await l.json();l.ok?t?(localStorage.setItem("token",i.token),localStorage.setItem("user_role",i.user.role),h()):(alert("Registration successful! Please login."),d(!0)):alert(i.detail||"Authentication failed.")}catch{alert("Connection failed.")}finally{u(!1)}},children:[!t&&e.jsx(n,{label:"Full Name",placeholder:"John Doe",value:m,onChange:a=>f(a.target.value),icon:e.jsx(N,{size:18}),required:!0}),e.jsx(n,{label:"Email Address",type:"email",placeholder:t?"name@iitu.kz":"yourname@iitu.kz (Required for Student)",value:r,onChange:a=>b(a.target.value),icon:e.jsx(_,{size:18}),required:!0}),e.jsx(n,{label:"Password",type:"password",placeholder:"••••••••",value:o,onChange:a=>y(a.target.value),icon:e.jsx(I,{size:18}),required:!0}),e.jsx(x,{type:"submit",className:"w-full py-4 text-base",isLoading:p,children:t?"Sign In":"Create Account"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-800"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-slate-900 text-slate-500 transition-colors",children:"Or continue with"})})]}),e.jsxs(x,{variant:"secondary",className:"w-full py-3",children:[e.jsx(S,{size:20}),"GitHub"]})]}),e.jsx("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-800 text-center transition-colors",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[t?"Don't have an account?":"Already have an account?"," ",e.jsx("button",{onClick:()=>d(!t),className:"text-blue-600 font-bold hover:text-blue-700 transition-colors",children:t?"Sign Up":"Sign In"})]})})]})})};export{P as AuthPage};
